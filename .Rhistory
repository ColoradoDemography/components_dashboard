title="Population Change")
)
}
components_p(13)
components_p(0)
runApp()
runApp()
packrat::set_opts(vcs.ignore.lib = TRUE, vcs.ignore.src = TRUE)
packrat::bundle()
shiny::runApp()
runApp()
shiny::runApp()
shiny::runApp()
runApp()
runApp()
components_p=function(fips){
data=county_profile%>%
filter(countyfips==fips)%>%
select(countyfips, year, naturalIncrease, netMigration)
plot_ly(data, x=year, y=netMigration, type= "bar", marker=list(color = "rgb(92,102,112)"), name="Net Migration")%>%
add_trace( y=naturalIncrease, marker=list(color="rgb(0,149,58)"), name= "Natural Increase")%>%
layout(
barmode="overlay",
title=paste("Births, Deaths, and Net Migration 1985 to", as.character(max(data$year))),
xaxis=list(
title="Year"),
yaxis=list(
title="Population Change"),
legend=list(
x= 0,
y=-.1
)
)
}
components_p(1)
components_p=function(fips){
data=county_profile%>%
filter(countyfips==fips)%>%
select(countyfips, year, naturalIncrease, netMigration)
plot_ly(data, x=year, y=netMigration, type= "bar", marker=list(color = "rgb(92,102,112)"), name="Net Migration")%>%
add_trace( y=naturalIncrease, marker=list(color="rgb(0,149,58)"), name= "Natural Increase")%>%
layout(
barmode="overlay",
title=paste("Births, Deaths, and Net Migration 1985 to", as.character(max(data$year))),
xaxis=list(
title="Year"),
yaxis=list(
title="Population Change"),
legend=list(
x= .5,
y=-.1
)
)
}
components_p(1)
components_p(123)
components_p=function(fips){
data=county_profile%>%
filter(countyfips==fips)%>%
select(countyfips, year, naturalIncrease, netMigration)
plot_ly(data, x=year, y=netMigration, type= "bar", marker=list(color = "rgb(92,102,112)"), name="Net Migration")%>%
add_trace( y=naturalIncrease, marker=list(color="rgb(0,149,58)"), name= "Natural Increase")%>%
layout(
barmode="overlay",
title=paste("Births, Deaths, and Net Migration 1985 to", as.character(max(data$year))),
xaxis=list(
title="Year"),
yaxis=list(
title="Population Change"),
legend=list(
x= .5,
y=-.5
)
)
}
components_p(123)
components_p=function(fips){
data=county_profile%>%
filter(countyfips==fips)%>%
select(countyfips, year, naturalIncrease, netMigration)
plot_ly(data, x=year, y=netMigration, type= "bar", marker=list(color = "rgb(92,102,112)"), name="Net Migration")%>%
add_trace( y=naturalIncrease, marker=list(color="rgb(0,149,58)"), name= "Natural Increase")%>%
layout(
barmode="overlay",
title=paste("Births, Deaths, and Net Migration 1985 to", as.character(max(data$year))),
xaxis=list(
title="Year"),
yaxis=list(
title="Population Change"),
legend=list(
x= .5,
y=-.2
)
)
}
components_p(123)
components_p=function(fips){
data=county_profile%>%
filter(countyfips==fips)%>%
select(countyfips, year, naturalIncrease, netMigration)
plot_ly(data, x=year, y=netMigration, type= "bar", marker=list(color = "rgb(92,102,112)"), name="Net Migration")%>%
add_trace( y=naturalIncrease, marker=list(color="rgb(0,149,58)"), name= "Natural Increase")%>%
layout(
barmode="overlay",
title=paste("Births, Deaths, and Net Migration 1985 to", as.character(max(data$year))),
xaxis=list(
title="Year"),
yaxis=list(
title="Population Change"),
legend=list(
x= 1,
y=.5
)
)
}
components_p(123)
components_p=function(fips){
data=county_profile%>%
filter(countyfips==fips)%>%
select(countyfips, year, naturalIncrease, netMigration)
plot_ly(data, x=year, y=netMigration, type= "bar", marker=list(color = "rgb(92,102,112)"), name="Net Migration")%>%
add_trace( y=naturalIncrease, marker=list(color="rgb(0,149,58)"), name= "Natural Increase")%>%
layout(
barmode="overlay",
title=paste("Births, Deaths, and Net Migration 1985 to", as.character(max(data$year))),
xaxis=list(
title="Year"),
yaxis=list(
title="Population Change"),
legend=list(
x= .75,
y=1
)
)
}
components_p(123)
runApp()
shiny::runApp()
runApp()
runApp()
runApp()
shiny::runApp()
install.packages("shiny")
install.packages("shiny")
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
<<<<<<< HEAD
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
=======
>>>>>>> origin/master
shiny::runApp()
runApp()
runApp()
runApp()
shiny::runApp()
runApp()
<<<<<<< HEAD
<<<<<<< HEAD
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
load("county_profile.rdata")
head(county_profiel)
head(county_profile)
names(county_profile)
county_profile=bind_rows(couty_profile, mesa_add)
library(dplyr)
library(tidyr)
library(plotly)
mesa_add=data.frame(
countyfips=77,
year=2015,
births=1826,
censusBuildingPermits= 0,
deaths=1484,
groupQuartersPopulation=0,
householdPopulation=0,
households=0,
householdSize=0,
naturalIncreas=0,
netMigration=125,
totalHousingUnits=0,
vacancyRate=0,
vacantHousingUnits=0
)
county_profile=bind_rows(couty_profile, mesa_add)
county_profile=bind_rows(county_profile, mesa_add)
shiny::runApp()
1826-1484
runApp()
runApp()
=======
>>>>>>> parent of a83d3d8... for elizabeth - temporary
shiny::runApp()
=======
>>>>>>> parent of a83d3d8... for elizabeth - temporary
shiny::runApp()
library(dplyr)
library(tidyr)
library(plotly)
load("county_forecast.rdata")
load("county_profile.rdata")
load("county_migbyage.rdata")
View(county_profile)
shiny::runApp()
devtools::install_github("coloradodemography/codemogAPI")
shiny::runApp()
projections_p=function(fips, est_year){
CO=codemogAPI::county_sya(0, 1985:2014)%>% # Creates data for the state as a whole since that isn't in the data frame.
filter(year>est_year)%>%
group_by(year)%>%
summarize(totalPopulation=sum(totalPopulation))%>%
mutate(countyfips=0)%>%
select(countyfips, year, totalPopulation)
data=county_forecast%>%
bind_rows(CO)%>%
filter(countyfips==fips, year>=est_year)%>%
group_by(countyfips, year)%>%
summarize(totalPopulation=sum(totalPopulation))%>%
select(countyfips, year, totalPopulation)
plot_ly(data, x=year, y=totalPopulation, type= "bar", marker=list(color = "rgb(31,74,126)"))%>%
layout(
title=paste("Population Projections", as.character(est_year), "to 2050"),
xaxis=list(
title="Year"),
yaxis=list(
title="Total Population"),
margin=list(t=60)
)
}
projections_p(1, 2010)
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
devtools::install_github("coloradodemography/codemogAPI")
runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
runApp()
runApp()
devtools::install_github("ropensci/plotly")
devtools::install_github("ropensci/plotly")
install.package("colorscales")
install.packages("colorspace")
install.packages("colorspace")
devtools::install_github("ropensci/plotly")
shiny::runApp()
shiny::runApp()
install.packages("curl")
runApp()
shiny::runApp()
shiny::runApp()
data=codemogAPI::county_profile(fips, 1985:2015, vars="year,totalpopulation")
data=codemogAPI::county_profile(fips, 1985:2015, vars="totalpopulation")
names(data)
runApp()
runApp()
fips=1
data=codemogAPI::county_profile(fips, 1985:2015, vars="births,deaths,netmigration")%>%
mutate(births=as.numeric(births),
deaths=as.numeric(deaths),
netmigration=as.numeric(netmigration),
naturalIncrease=births-deaths)%>%
select(countyfips, year, naturalIncrease, netMigration=netmigration)
plot_ly(data, x=~year,y=~(naturalIncrease+netMigration), type="scatter", line=list(color="rgb(31,74,126)", width=2.5, dash="solid"), name= "Total Population Change")%>%
add_trace(x=~year,y=~naturalIncrease, line=list(color="rgb(0,149,58)", width=2.5, dash="dot"), name= "Natural Increase")%>%
add_trace(x=~year,y=~netMigration, type= "line", line=list(color = "rgb(92,102,112)", width=2.5, dash="dot"), name="Net Migration")%>%
layout(
barmode="stacked",
title=paste("Births, Deaths, and Net Migration 1985 to", as.character(max(data$year))),
xaxis=list(
title="Year"),
yaxis=list(
title="Population Change"),
margin=list(t=60)
)
data=codemogAPI::county_profile(fips, 1985:2015, vars="births,deaths,netmigration")%>%
mutate(births=as.numeric(births),
deaths=as.numeric(deaths),
netmigration=as.numeric(netmigration),
naturalIncrease=births-deaths)%>%
select(countyfips, year, naturalIncrease, netMigration=netmigration)
plot_ly(data, x=~year,y=~(naturalIncrease+netMigration), type="scatter", line=list(color="rgb(31,74,126)", width=2.5, dash="solid"), name= "Total Population Change")%>%
add_trace(x=~year,y=~naturalIncrease, line=list(color="rgb(0,149,58)", width=2.5, dash="dot"), name= "Natural Increase")%>%
add_trace(x=~year,y=~netMigration, line=list(color = "rgb(92,102,112)", width=2.5, dash="dot"), name="Net Migration")%>%
layout(
barmode="stacked",
title=paste("Births, Deaths, and Net Migration 1985 to", as.character(max(data$year))),
xaxis=list(
title="Year"),
yaxis=list(
title="Population Change"),
margin=list(t=60)
)
runApp()
runApp()
mig_age_p=function(fips){
data=county_migbyage%>%
mutate(countyfips=as.numeric(countyfips))%>%
filter(countyfips==fips, age<90)
plot_ly(data, x=~age, y=~netMigration, type="scatter", line=list(color = "rgb(31,74,126)"))%>%
layout(
title="Net Migration by Age, 2000 to 2010",
xaxis=list(
title=" Age"),
yaxis=list(
title=" Net Migration"),
margin=list(t=60)
)
}}
data=county_migbyage%>%
mutate(countyfips=as.numeric(countyfips))%>%
filter(countyfips==fips, age<90)
plot_ly(data, x=~age, y=~netMigration, type="scatter", line=list(color = "rgb(31,74,126)"))%>%
layout(
title="Net Migration by Age, 2000 to 2010",
xaxis=list(
title=" Age"),
yaxis=list(
title=" Net Migration"),
margin=list(t=60)
)
data=codemogAPI::county_profile(fips, 1985:2015, vars="totalpopulation")
plot_ly(data, x=~year, y=~totalpopulation, type= "bar", marker=list(color = "rgb(31,74,126)"))%>%
layout(
title=paste("Population Estimates 1985 to", as.character(max(data$year))),
xaxis=list(
title="Year"),
yaxis=list(
title="Total Population"),
margin=list(t=60)
)
data=codemogAPI::county_profile(fips, 1985:2015, vars="totalpopulation")
plot_ly(data, x=~year, y=totalpopulation, type= "bar", marker=list(color = "rgb(31,74,126)"))%>%
layout(
title=paste("Population Estimates 1985 to", as.character(max(data$year))),
xaxis=list(
title="Year"),
yaxis=list(
title="Total Population"),
margin=list(t=60)
)
data=codemogAPI::county_profile(fips, 1985:2015, vars="totalpopulation")
plot_ly(data, x= ~year, y= ~totalpopulation, type= "bar", marker=list(color = "rgb(31,74,126)"))%>%
layout(
title=paste("Population Estimates 1985 to", as.character(max(data$year))),
xaxis=list(
title="Year"),
yaxis=list(
title="Total Population"),
margin=list(t=60)
)
head(data)
plot_ly(data, x= ~year, y= ~totalpopulation, type= "bar", marker=list(color = "rgb(31,74,126)"))
plot_ly(data, y= ~year, x= ~totalpopulation, type= "bar", marker=list(color = "rgb(31,74,126)"))
plot_ly(data, x= ~as.factor(year), y= ~totalpopulation, type= "bar", marker=list(color = "rgb(31,74,126)"))
plot_ly(data, x= ~year, y= ~as.numeric(totalpopulation), type= "bar", marker=list(color = "rgb(31,74,126)"))
data=codemogAPI::county_profile(fips, 1985:2015, vars="totalpopulation")
plot_ly(data, x= ~year, y= ~as.numeric(totalpopulation), type= "bar", marker=list(color = "rgb(31,74,126)"))%>%
layout(
title=paste("Population Estimates 1985 to", as.character(max(data$year))),
xaxis=list(
title="Year"),
yaxis=list(
title="Total Population"),
margin=list(t=60)
)
runApp()
data=codemogAPI::county_sya(fips, 3000)%>%
mutate(totalpopulation=as.numeric(totalpopulation))%>%
# bind_rows(CO)%>%
filter(countyfips==fips, year>=est_year)%>%
group_by(countyfips, year)%>%
summarize(totalpopulation=sum(as.numeric(as.character(totalpopulation))))%>%
select(countyfips, year, totalpopulation)
data=codemogAPI::county_sya(fips, 3000)%>%
mutate(totalpopulation=as.numeric(totalpopulation))%>%
# bind_rows(CO)%>%
filter(countyfips==fips, year>=est_year)%>%
group_by(countyfips, year)%>%
summarize(totalpopulation=sum(as.numeric(as.character(totalpopulation))))%>%
select(countyfips, year, totalpopulation)
data=codemogAPI::county_sya(fips, 3000)%>%
mutate(totalpopulation=as.numeric(totalpopulation))%>%
# bind_rows(CO)%>%
filter(countyfips==fips, year>=est_year)%>%
group_by(countyfips, year)%>%
summarize(totalpopulation=sum(as.numeric(as.character(totalpopulation))))%>%
select(countyfips, year, totalpopulation)
data=codemogAPI::county_sya(fips, 3000)%>%
mutate(totalpopulation=as.numeric(totalpopulation))%>%
# bind_rows(CO)%>%
filter(countyfips==fips, year>=est_year)%>%
group_by(countyfips, year)%>%
summarize(totalpopulation=sum(as.numeric(as.character(totalpopulation))))%>%
select(countyfips, year, totalpopulation)
source('J:/Estimates/Admin/AppDevelopment/demographic_dashboard/setup.R', echo=TRUE)
data=codemogAPI::county_sya(fips, 3000)
data=codemogAPI::county_sya(, 3000)
data=codemogAPI::county_sya(1, 3000)
shiny::runApp()
devtools::install_github("coloradod3emography/codemogAPI")
devtools::install_github("coloradodemography/codemogAPI")
runApp()
codemogAPI::county_sya(1,3000)
data=codemogAPI::county_sya(fips, 3000)%>%
mutate(totalpopulation=as.numeric(totalpopulation))%>%
# bind_rows(CO)%>%
filter(countyfips==fips, year>=est_year)%>%
group_by(countyfips, year)%>%
summarize(totalpopulation=sum(as.numeric(as.character(totalpopulation))))%>%
select(countyfips, year, totalpopulation)
est_year=2015
data=codemogAPI::county_sya(fips, 3000)%>%
mutate(totalpopulation=as.numeric(totalpopulation))%>%
# bind_rows(CO)%>%
filter(countyfips==fips, year>=est_year)%>%
group_by(countyfips, year)%>%
summarize(totalpopulation=sum(as.numeric(as.character(totalpopulation))))%>%
select(countyfips, year, totalpopulation)
data
plot_ly(data, x=~year, y=~totalpopulation, type= "bar", marker=list(color = "rgb(31,74,126)"))%>%
layout(
title=paste("Population Projections", as.character(est_year), "to 2050"),
xaxis=list(
title="Year"),
yaxis=list(
title="Total Population"),
margin=list(t=60)
)
runApp()
data=codemogAPI::county_profile(fips, 1985:2015, vars="totalpopulation")
plot_ly(data, x= ~year, y= ~as.numeric(totalpopulation), type= "bar", marker=list(color = "rgb(31,74,126)"))%>%
layout(
title=paste("Population Estimates 1985 to", as.character(max(data$year))),
xaxis=list(
title="Year"),
yaxis=list(
title="Total Population"),
margin=list(t=60)
)
data=county_migbyage%>%
mutate(countyfips=as.numeric(countyfips))%>%
filter(countyfips==fips, age<90)
plot_ly(data, x=~age, y=~netMigration, type="scatter", line=list(color = "rgb(31,74,126)"))%>%
layout(
title="Net Migration by Age, 2000 to 2010",
xaxis=list(
title=" Age"),
yaxis=list(
title=" Net Migration"),
margin=list(t=60)
)
plot_ly(data, x=~age, y=~netMigration, type="scatter", line=list(color = "rgb(31,74,126)"), marker=list(color="rgb(31,74,126)"))%>%
layout(
title="Net Migration by Age, 2000 to 2010",
xaxis=list(
title=" Age"),
yaxis=list(
title=" Net Migration"),
margin=list(t=60)
)
CO=codemogAPI::county_sya(0,3000)%>% # Creates data for the state as a whole since that isn't in the data frame.
filter(year>est_year)%>%
group_by(year)%>%
summarize(totalpopulation=sum(totalpopulation))%>%
mutate(countyfips=0)%>%
select(countyfips, year, totalpopulation)
x=codemogAPI::county_sya(fips, 3000)%>%
bind_rows(CO)%>%
filter(countyfips==fips, year>=est_year)%>%
group_by(countyfips, year)%>%
summarize(totalpopulation=sum(totalpopulation))%>%
bind_cols(data.frame(County=rep(name, length(unique(county_forecast$year)))))%>%
select(County, Year=year, TotalPopulation=totalpopulation)
codemogAPI::county_sya(0,3000)
jsonlite::fromJSON( "https://gis.dola.colorado.gov/lookups/sya?county=1, 3, 5, 7, 9, 11, 13, 14, 15, 17, 19, 21, 23, 25, 27, 29, 31, 33, 35, 37, 39, 41, 43,
45, 47, 49, 51, 53, 55, 57, 59, 61, 63, 65, 67, 69, 71, 73, 75, 77, 79, 81, 83, 85, 87, 89,
91, 93, 95, 97, 99, 101, 103, 105, 107, 109, 111, 113, 115, 117, 119, 121, 123, 125&year=2014", simplifyVector = TRUE)
devtools::install_github("coloradodemography/codemogAPI")
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
shiny::runApp()
runApp()
