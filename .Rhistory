mutate(countyfips=as.numeric(countyfips))%>%
filter(countyfips==1, age<90)
plotl_y= plot_ly(data, x=age, y=netMigration, color = rgb(31,74,126, max=255))
View(plotl_y)
library(plotly)
data=county_migbyage%>%
mutate(countyfips=as.numeric(countyfips))%>%
filter(countyfips==1, age<90)
plot_ly(data, x=age, y=netMigration, color = rgb(31,74,126, max=255))
data=county_migbyage%>%
mutate(countyfips=as.numeric(countyfips))%>%
filter(countyfips==1, age<90)
plotl_y= plot_ly(data, x=age, y=netMigration, color = "rgb(31,74,126)")
plot_ly(data, x=age, y=netMigration, color = "rgb(31,74,126)")
plot_ly(data, x=age, y=netMigration, marker=list(color = "rgb(31,74,126)"))
mig_age_p=function(fips, base=12, agecat="ten"){
data=county_migbyage%>%
mutate(countyfips=as.numeric(countyfips))%>%
filter(countyfips==fips, age<90)
plot_ly(data, x=age, y=netMigration, line=list(color = "rgb(31,74,126)"))
}
mig_age_p(1)
mig_age_p=function(fips, base=12, agecat="ten"){
data=county_migbyage%>%
mutate(countyfips=as.numeric(countyfips))%>%
filter(countyfips==fips, age<90)
plot_ly(data, x=age, y=netMigration, line=list(color = "rgb(31,74,126)"))%>%
layout(
title="Net Migration by Age, 2000 to 2010",
xaxis=list(
title=" Age"),
yaxis=list(
title=" Net Migration")
))
}
mig_age_p=function(fips, base=12, agecat="ten"){
data=county_migbyage%>%
mutate(countyfips=as.numeric(countyfips))%>%
filter(countyfips==fips, age<90)
plot_ly(data, x=age, y=netMigration, line=list(color = "rgb(31,74,126)"))%>%
layout(
title="Net Migration by Age, 2000 to 2010",
xaxis=list(
title=" Age"),
yaxis=list(
title=" Net Migration")
)
}
mig_age_p(1)
shiny::runApp()
filter(read.csv("county_names.csv"), county=="Adams")%>%
select(countyfips)
filter(read.csv("county_names.csv"), county=="Adams")%>%
unique(select(countyfips))
unique(filter(read.csv("county_names.csv"), county=="Adams")%>%
select(countyfips))
filter(read.csv("county_names.csv"), county=="Adams")%>%
select(countyfips)%>%
as.vector()
filter(read.csv("county_names.csv"), county=="Adams")%>%
select(countyfips)%>%
as.character()
filter(read.csv("county_names.csv"), county=="Adams")%>%
select(countyfips)%>%
as.numeric()
runApp()
runApp()
mig_age_g=function(fips, base=12, agecat="ten"){
gg_plot=county_migbyage%>%
mutate(countyfips=as.numeric(countyfips))%>%
filter(countyfips==fips, age<90)%>%
ggplot(aes(x=age, y=netMigration, group=countyfips))+
geom_line( color=rgb(31,74,126, max=255))+
geom_hline(aes(yintercept=0), color=rgb(92,102,112, max=255))+
scale_x_discrete(breaks=switch(agecat, five=c(5,10,15,20,25,35,30,35,40,45,50,55,60,65,70,75,80,85), ten=c(10,20,30,40,50,60,70,80)))+
theme_codemog(base_size = base)+
labs(x="Age", y="Net Migration", title="Net Migration by Age, 2000 to 2010")
return(gg_plot)
}
mig_age_g(1)
mig_age_g(1)$date
mig_age_g(1)$data
runApp()
runApp()
mig_age_d=function(fips, name){
x=county_migbyage%>%
mutate(countyfips=as.numeric(countyfips))%>%
filter(countyfips==fips, age<90)%>%
bind_cols(data.frame(rep(name, 1:89)))
return(x)
}
mig_age_d(1, "Adams")
mig_age_d=function(fips, name){
x=county_migbyage%>%
mutate(countyfips=as.numeric(countyfips))%>%
filter(countyfips==fips, age<90)%>%
bind_cols(data.frame(County=rep(name, 89)))
return(x)
}
mig_age_d(1, "Adams")
mig_age_d=function(fips, name){
x=county_migbyage%>%
mutate(countyfips=as.numeric(countyfips))%>%
filter(countyfips==fips, age<90)%>%
bind_cols(data.frame(County=rep(name, 90)))
return(x)
}
mig_age_d(1, "Adams")
mig_age_d=function(fips, name){
x=county_migbyage%>%
mutate(countyfips=as.numeric(countyfips))%>%
filter(countyfips==fips, age<90)%>%
bind_cols(data.frame(County=rep(name, 90)))%>%
select(County, Age=age, NetMigration=netMigration)
return(x)
}
mig_age_d(1,"Adams")
runApp()
runApp()
runApp()
runApp()
str(county_profile)
fips=1
name="Adams"
estimates_d=function(fips, name){
x=county_profile%>%
filter(countyfips==fips)%>%
select(countyfips, year, householdPopulation, groupQuartersPopulation)%>%
mutate(TotalPopulation=householdPopulation+groupQuartersPopulation)%>%
bind_cols(data.frame(County=rep(name, length(unique(county_profile$year)))))%>%
return(x)
}
estiamtes_d()
estimates_d()
estimates_d(fips,name)
estimates_d=function(fips, name){
x=county_profile%>%
filter(countyfips==fips)%>%
select(countyfips, year, householdPopulation, groupQuartersPopulation)%>%
mutate(TotalPopulation=householdPopulation+groupQuartersPopulation)%>%
bind_cols(data.frame(County=rep(name, length(unique(county_profile$year)))))%>%
select(County, Year=year, TotalPopulation)
return(x)
}
estimates_d(fips,name)
View(estimates_d(fips,name))
estimates_p=function(fips){
data=county_profile%>%
filter(countyfips==fips)%>%
select(countyfips, year, householdPopulation, groupQuartersPopulation)
plot_ly(data, x=age, y=householdPopulation+groupQuartersPopulation, type= "bar", marker=list(color = "rgb(31,74,126)"))%>%
layout(
title=paste("Population Estimates 1980 to", as.character(max(data$year))),
xaxis=list(
title="Year"),
yaxis=list(
title="Total Population")
)
}
estimates_p(fips)
estimates_p=function(fips){
data=county_profile%>%
filter(countyfips==fips)%>%
select(countyfips, year, householdPopulation, groupQuartersPopulation)
plot_ly(data, x=year, y=householdPopulation+groupQuartersPopulation, type= "bar", marker=list(color = "rgb(31,74,126)"))%>%
layout(
title=paste("Population Estimates 1980 to", as.character(max(data$year))),
xaxis=list(
title="Year"),
yaxis=list(
title="Total Population")
)
}
estimates_p(fips)
runApp()
runApp()
runApp()
CO=county_forecast%>% # Creates data for the state as a whole since that isn't in the data frame.
filter(year>est_year)%>%
group_by(year)%>%
summarize(totalPopulation=sum(totalPopulation))%>%
mutate(countyfips=0)%>%
select(countyfips, year, totalPopulation)
runApp()
components_p=function(fips){
data=county_profile%>%
filter(countyfips==fips)%>%
select(countyfips, year, naturalIncrease, netMigration)
plot_ly(data, x=year, y=naturalIncrease, type= "bar", marker=list(color = "rgb(92,102,112)"))%>%
add_trace(x=year, y=netMigration, marker=list(color="rgb(0,149,58)"))%>%
layout(
barmode = "stack",
title=paste("Births, Deaths, and Net Migration 1980 to", as.character(max(data$year))),
xaxis=list(
title="Year"),
yaxis=list(
title="Population Change")
)
}
components_p(1)
add_trace(x=year, y=netMigration, marker=list(color="rgb(0,149,58)"), name= "Net Migration")%>%
x
components_p=function(fips){
data=county_profile%>%
filter(countyfips==fips)%>%
select(countyfips, year, naturalIncrease, netMigration)
plot_ly(data, x=year, y=naturalIncrease, type= "bar", marker=list(color = "rgb(92,102,112)"), name="Natural Increase")%>%
add_trace(x=year, y=netMigration, marker=list(color="rgb(0,149,58)"), name= "Net Migration")%>%
layout(
title=paste("Births, Deaths, and Net Migration 1980 to", as.character(max(data$year))),
xaxis=list(
title="Year"),
yaxis=list(
title="Population Change")
)
}
components_p(1)
components_p=function(fips){
data=county_profile%>%
filter(countyfips==fips)%>%
select(countyfips, year, naturalIncrease, netMigration)
plot_ly(data, x=year, y=naturalIncrease, type= "bar", marker=list(color = "rgb(92,102,112)"), name="Natural Increase")%>%
add_trace( y=netMigration, marker=list(color="rgb(0,149,58)"), name= "Net Migration")%>%
layout(
title=paste("Births, Deaths, and Net Migration 1980 to", as.character(max(data$year))),
xaxis=list(
title="Year"),
yaxis=list(
title="Population Change")
)
}
components_p(1)
components_p=function(fips){
data=county_profile%>%
filter(countyfips==fips)%>%
select(countyfips, year, naturalIncrease, netMigration)
plot_ly(data, x=year, y=naturalIncrease, type= "bar", marker=list(color = "rgb(92,102,112)"), name="Natural Increase")%>%
add_trace( y=netMigration, marker=list(color="rgb(0,149,58)"), name= "Net Migration")%>%
layout(
barmode="stack",
title=paste("Births, Deaths, and Net Migration 1980 to", as.character(max(data$year))),
xaxis=list(
title="Year"),
yaxis=list(
title="Population Change")
)
}
components_p(1)
components_p(3)
components_p=function(fips){
data=county_profile%>%
filter(countyfips==fips)%>%
select(countyfips, year, naturalIncrease, netMigration)
plot_ly(data, x=year, y=naturalIncrease, type= "bar", marker=list(color = "rgb(92,102,112)"), name="Natural Increase")%>%
add_trace( y=netMigration, marker=list(color="rgb(0,149,58)"), name= "Net Migration")%>%
layout(
barmode="overlay",
title=paste("Births, Deaths, and Net Migration 1980 to", as.character(max(data$year))),
xaxis=list(
title="Year"),
yaxis=list(
title="Population Change")
)
}
components_p(3)
components_p(1)
components_p(3)
components_p=function(fips){
data=county_profile%>%
filter(countyfips==fips)%>%
select(countyfips, year, naturalIncrease, netMigration)
plot_ly(data, x=year, y=netMigration, type= "bar", marker=list(color = "rgb(92,102,112)"), name="Natural Increase")%>%
add_trace( y=naturalIncrease, marker=list(color="rgb(0,149,58)"), name= "Net Migration")%>%
layout(
barmode="overlay",
title=paste("Births, Deaths, and Net Migration 1985 to", as.character(max(data$year))),
xaxis=list(
title="Year"),
yaxis=list(
title="Population Change")
)
}
components_p(3)
components_p=function(fips){
data=county_profile%>%
filter(countyfips==fips)%>%
select(countyfips, year, naturalIncrease, netMigration)
plot_ly(data, x=year, y=netMigration, type= "bar", marker=list(color = "rgb(92,102,112)"), name="Net Migration")%>%
add_trace( y=naturalIncrease, marker=list(color="rgb(0,149,58)"), name= "Natural Increase")%>%
layout(
barmode="overlay",
title=paste("Births, Deaths, and Net Migration 1985 to", as.character(max(data$year))),
xaxis=list(
title="Year"),
yaxis=list(
title="Population Change")
)
}
components_p(13)
components_p(0)
runApp()
runApp()
packrat::set_opts(vcs.ignore.lib = TRUE, vcs.ignore.src = TRUE)
packrat::bundle()
shiny::runApp()
runApp()
shiny::runApp()
shiny::runApp()
runApp()
runApp()
components_p=function(fips){
data=county_profile%>%
filter(countyfips==fips)%>%
select(countyfips, year, naturalIncrease, netMigration)
plot_ly(data, x=year, y=netMigration, type= "bar", marker=list(color = "rgb(92,102,112)"), name="Net Migration")%>%
add_trace( y=naturalIncrease, marker=list(color="rgb(0,149,58)"), name= "Natural Increase")%>%
layout(
barmode="overlay",
title=paste("Births, Deaths, and Net Migration 1985 to", as.character(max(data$year))),
xaxis=list(
title="Year"),
yaxis=list(
title="Population Change"),
legend=list(
x= 0,
y=-.1
)
)
}
components_p(1)
components_p=function(fips){
data=county_profile%>%
filter(countyfips==fips)%>%
select(countyfips, year, naturalIncrease, netMigration)
plot_ly(data, x=year, y=netMigration, type= "bar", marker=list(color = "rgb(92,102,112)"), name="Net Migration")%>%
add_trace( y=naturalIncrease, marker=list(color="rgb(0,149,58)"), name= "Natural Increase")%>%
layout(
barmode="overlay",
title=paste("Births, Deaths, and Net Migration 1985 to", as.character(max(data$year))),
xaxis=list(
title="Year"),
yaxis=list(
title="Population Change"),
legend=list(
x= .5,
y=-.1
)
)
}
components_p(1)
components_p(123)
components_p=function(fips){
data=county_profile%>%
filter(countyfips==fips)%>%
select(countyfips, year, naturalIncrease, netMigration)
plot_ly(data, x=year, y=netMigration, type= "bar", marker=list(color = "rgb(92,102,112)"), name="Net Migration")%>%
add_trace( y=naturalIncrease, marker=list(color="rgb(0,149,58)"), name= "Natural Increase")%>%
layout(
barmode="overlay",
title=paste("Births, Deaths, and Net Migration 1985 to", as.character(max(data$year))),
xaxis=list(
title="Year"),
yaxis=list(
title="Population Change"),
legend=list(
x= .5,
y=-.5
)
)
}
components_p(123)
components_p=function(fips){
data=county_profile%>%
filter(countyfips==fips)%>%
select(countyfips, year, naturalIncrease, netMigration)
plot_ly(data, x=year, y=netMigration, type= "bar", marker=list(color = "rgb(92,102,112)"), name="Net Migration")%>%
add_trace( y=naturalIncrease, marker=list(color="rgb(0,149,58)"), name= "Natural Increase")%>%
layout(
barmode="overlay",
title=paste("Births, Deaths, and Net Migration 1985 to", as.character(max(data$year))),
xaxis=list(
title="Year"),
yaxis=list(
title="Population Change"),
legend=list(
x= .5,
y=-.2
)
)
}
components_p(123)
components_p=function(fips){
data=county_profile%>%
filter(countyfips==fips)%>%
select(countyfips, year, naturalIncrease, netMigration)
plot_ly(data, x=year, y=netMigration, type= "bar", marker=list(color = "rgb(92,102,112)"), name="Net Migration")%>%
add_trace( y=naturalIncrease, marker=list(color="rgb(0,149,58)"), name= "Natural Increase")%>%
layout(
barmode="overlay",
title=paste("Births, Deaths, and Net Migration 1985 to", as.character(max(data$year))),
xaxis=list(
title="Year"),
yaxis=list(
title="Population Change"),
legend=list(
x= 1,
y=.5
)
)
}
components_p(123)
components_p=function(fips){
data=county_profile%>%
filter(countyfips==fips)%>%
select(countyfips, year, naturalIncrease, netMigration)
plot_ly(data, x=year, y=netMigration, type= "bar", marker=list(color = "rgb(92,102,112)"), name="Net Migration")%>%
add_trace( y=naturalIncrease, marker=list(color="rgb(0,149,58)"), name= "Natural Increase")%>%
layout(
barmode="overlay",
title=paste("Births, Deaths, and Net Migration 1985 to", as.character(max(data$year))),
xaxis=list(
title="Year"),
yaxis=list(
title="Population Change"),
legend=list(
x= .75,
y=1
)
)
}
components_p(123)
runApp()
shiny::runApp()
runApp()
runApp()
runApp()
shiny::runApp()
install.packages("shiny")
install.packages("shiny")
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
<<<<<<< HEAD
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
=======
>>>>>>> origin/master
shiny::runApp()
runApp()
runApp()
runApp()
shiny::runApp()
runApp()
<<<<<<< HEAD
<<<<<<< HEAD
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
load("county_profile.rdata")
head(county_profiel)
head(county_profile)
names(county_profile)
county_profile=bind_rows(couty_profile, mesa_add)
library(dplyr)
library(tidyr)
library(plotly)
mesa_add=data.frame(
countyfips=77,
year=2015,
births=1826,
censusBuildingPermits= 0,
deaths=1484,
groupQuartersPopulation=0,
householdPopulation=0,
households=0,
householdSize=0,
naturalIncreas=0,
netMigration=125,
totalHousingUnits=0,
vacancyRate=0,
vacantHousingUnits=0
)
county_profile=bind_rows(couty_profile, mesa_add)
county_profile=bind_rows(county_profile, mesa_add)
shiny::runApp()
1826-1484
runApp()
runApp()
=======
>>>>>>> parent of a83d3d8... for elizabeth - temporary
shiny::runApp()
=======
>>>>>>> parent of a83d3d8... for elizabeth - temporary
shiny::runApp()
library(dplyr)
library(tidyr)
library(plotly)
load("county_forecast.rdata")
load("county_profile.rdata")
load("county_migbyage.rdata")
View(county_profile)
